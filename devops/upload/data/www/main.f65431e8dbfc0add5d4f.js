/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/constants.js":
/*!**************************!*\
  !*** ./src/constants.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst DiyConstants = {\n    \"UNITS\": '(\\xb5g/m\\xb3)',\n    \"BREAKLINE\": '<br>'\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DiyConstants);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RhbnRzLmpzPzVmYjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZSwyRUFBWSIsImZpbGUiOiIuL3NyYy9jb25zdGFudHMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEaXlDb25zdGFudHMgPSB7XG4gICAgXCJVTklUU1wiOiAnKFxceGI1Zy9tXFx4YjMpJyxcbiAgICBcIkJSRUFLTElORVwiOiAnPGJyPidcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGl5Q29uc3RhbnRzOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/constants.js\n");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"./src/constants.js\");\n\nlet map;\nlet layerControl;\nlet observations;\n\nconst initmap = () => {\n    const osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n    const geomaticoUrl = 'https://tileserver.geomatico.es/styles/klokantech-basic/{z}/{x}/{y}.png';\n    const osmAttrib = 'Map data Â© <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors';\n    const osm = new L.TileLayer(osmUrl, { minZoom: 0, maxZoom: 19, attribution: osmAttrib });\n    const geomatico = new L.TileLayer(geomaticoUrl, { minZoom: 0, maxZoom: 19, attribution: osmAttrib });\n\n    map = L.map('map', {\n        center: [40.412612, -3.686111],\n        zoom: 13,\n        layers: [geomatico],\n        zoomControl: false\n    });\n    L.control.zoom({\n        position: 'topright'\n    }).addTo(map);\n\n    const baseMaps = {\n        \"Basic\": geomatico,\n        \"OSM\": osm\n    }\n\n    layerControl = L.control.layers(baseMaps).addTo(map);\n    downloadGrid();\n    downloadData();\n    createLegend();\n};\n\nconst createLegend = () => {\n    let legend = L.control({position: 'bottomright'});\n    legend.onAdd = (map) => {\n        const div = L.DomUtil.create('div', 'leg')\n        const grades = [0, 5, 10, 15, 20, 25]\n        const labels = [];\n        div.innerHTML = `PM2.5 ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].UNITS} ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].BREAKLINE} `\n        for (let i = 0; i < grades.length; i++) {\n            div.innerHTML +=\n                '<i style=\"background:' + getColor(grades[i] + 1) + '\"></i> ' +\n                grades[i] + (grades[i + 1] ? '&ndash;' + (grades[i + 1]- 1) + '<br>' : '+');\n        } \n        return div; \n    };\n    legend.addTo(map);\n}\n\ndocument.getElementById('submit').addEventListener('click', () => {\n    map.removeLayer(observations);\n    let init = document.getElementById('start').value;\n    let init_date = new Date(init);\n    init_date = init_date.toISOString();\n    let end = document.getElementById('end').value;\n    let end_date = new Date(end);\n    /*Added one day to include the end date*/\n    end_date.setDate(end_date.getDate() + 1);\n    end_date = end_date.toISOString();\n    downloadData(init_date, end_date);\n});\n\nconst downloadData = (init_date, end_date) => {\n    let observations_url = `${\"http://respiramos.medialab-prado.es/\"}${\"api/v1/\"}${\"observations/\"}`;\n    if (init_date !== undefined && end_date !== undefined) {\n        observations_url = `${observations_url}?init_date=${init_date}&end_date=${end_date}`\n    }\n    fetch(observations_url)\n        .then(res => handleErrors(res))\n        .then(res => res.json())\n        .then(res => drawOutput(res))\n        .then(() => removeTable())\n        .catch(err => console.log('error', err));\n};\n\nconst downloadGrid = () => {\n    const grid_url = `${\"http://respiramos.medialab-prado.es/\"}${\"api/v1/\"}${\"grid/\"}`;\n    fetch(grid_url)\n        .then(res => handleErrors(res))\n        .then(res => res.json())\n        .then(res => drawGrid(res))\n        .catch(err => console.log(err));\n}\n\nconst drawOutput = (lines) => {\n    observations = L.geoJson(lines, {\n        pointToLayer: function (feature, latlng) {\n            return L.circleMarker(latlng, style(feature));\n        },\n    });\n    observations.addTo(map).on('click', observationsTable);\n    layerControl.removeLayer(observations);\n    layerControl.addOverlay(observations, 'Observaciones');\n    let end_observation = lines.features.length - 1;\n    map.flyTo([lines.features[end_observation].geometry.coordinates[1], lines.features[end_observation].geometry.coordinates[0]], \n        16, {animate: false, duration: 0.1});\n    return true;\n};\n\nvar styleGrid = (feature) => {\n    return {\n        color: 'black',\n        weight: 2,\n        fillOpacity: 0.65,\n        fillColor: getColor(feature.properties.pm2_5)\n    }\n};\n\nconst drawGrid = (lines) => {\n    const grid = L.geoJson(lines, {\n        style: styleGrid\n    }).addTo(map).on('click', gridTable);\n    layerControl.removeLayer(grid);\n    layerControl.addOverlay(grid, 'Rejilla');\n}\n\ndocument.getElementById('loginButton').addEventListener('click', () => {\n    const modal = document.getElementById('modalform').style.display = \"block\";\n\n});\n\ndocument.querySelector('.btnlogin').addEventListener('click', () => {\n    const uname = document.getElementById('uname').value;\n    const psw = document.getElementById('psw').value;\n    downloadToken(uname, psw);\n});\n\nconst downloadToken = (user, pass) => {\n    const get_token_url = `${\"http://respiramos.medialab-prado.es/\"}${\"api/v1/\"}${\"api-token-auth/\"}`;\n    let formdata = new FormData();\n    formdata.append('username', user);\n    formdata.append('password', pass);\n\n    const requestOptions = {\n        method: 'POST',\n        body: formdata,\n        redirect: 'follow'\n    };\n\n    fetch(get_token_url, requestOptions)\n        .then(res => handleErrors(res))\n        .then(res => res.json())\n        .then(res => getToken(res));\n}\n\nvar token;\nconst getToken = (res) => {\n    token = res.token;\n    document.getElementById('uploadfile').style.display = 'inline';\n    document.getElementById('modalform').style.display = 'none';\n    removeTable();\n}\n\nconst handleErrors = (response) => {\n    if (!response.ok) throw Error(response.statusText);\n    return response;\n};\n\nconst input = document.getElementById('fileinput');\nconst onSelectFile = () => {\n    upload(input.files[0])\n};\ndocument.getElementById('btnupload').addEventListener('click', onSelectFile, false);\n\nconst upload = (file) => {\n    const upload_url = `${\"http://respiramos.medialab-prado.es/\"}${\"api/v1/\"}${\"upload/\"}`;\n\n    const headers = new Headers();\n    headers.append('Authorization', `Token ${token}`);\n\n    const formdata = new FormData();\n    formdata.append(\"file\", file, file.name);\n\n    const requestOptions = {\n        method: 'POST',\n        headers: headers,\n        body: formdata,\n        redirect: 'follow'\n    }\n\n    fetch(upload_url, requestOptions)\n        .then(res => {\n            downloadGrid();\n            downloadData();\n        })\n        .catch(error => alert('CSV mal formado'));\n}\n\nconst getColor = (x) => {\n    return  x > 25 ? '#bd0026' :\n            x > 19 ? '#e31a1c' :\n            x > 14 ? '#fc4e2a' :\n            x >  9 ? '#fed976' :\n            x >  5 ? '#41ae76' :\n                     '#006d2c';\n};\n\nconst style = (feature) => {\n    return {\n        radius: 7,\n        color: 'black',\n        fillColor: getColor(feature.properties.pm2_5),\n        weight: 2,\n        opacity: 0.8,\n        fillOpacity: 0.8\n    };\n};\n\nconst observationsTable = (event) => {\n    const date = new Date(event.layer.feature.properties['date']);\n    const day = getDateFormat(date);\n    const clonedProperties = { ...event.layer.feature.properties };\n    clonedProperties['date'] = day;\n    \n    const propertyNames = ['date', 'time', 'pm1_0', 'pm2_5', 'pm10_0'];\n    const humanNames = {\n        'date': 'Fecha',\n        'time': 'Hora',\n        'pm1_0': `PM 1 ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].UNITS}`,  \n        'pm2_5': `PM 2.5 ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].UNITS}`,\n        'pm10_0': `PM 10 ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].UNITS}`\n    }\n    createTable(clonedProperties, propertyNames, humanNames);\n}\n\nconst gridTable = (event) => {\n    const clonedGridProperties = { ...event.layer.feature.properties };\n    const propertyGridNames = ['username', 'pm1_0', 'pm2_5', 'pm10_0'];\n    const humanGridNames = {\n        'username': 'Usuario + activo',\n        'pm1_0': `PM 1 ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].UNITS}`,\n        'pm2_5': `PM 2.5 ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].UNITS}`,\n        'pm10_0': `PM 10 ${_constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].UNITS}`        \n    }\n    createTable(clonedGridProperties, propertyGridNames, humanGridNames);\n}\n\nconst createTable = (clonedProperties, propertyNames, humanNames) => {\n    document.getElementById('openSidebarMenu').checked = true;\n    const body = document.getElementById('datepicker');    \n    removeTable();    \n\n    let table = document.createElement('table');\n    table.setAttribute('id', 'table');\n    table.setAttribute('class', 'observation_table');\n    table.setAttribute('border', '1');\n    table.setAttribute('border-color', 'black');\n    let tblBody = document.createElement('tbody');\n\n    propertyNames.map(property => {\n        let fila = document.createElement('tr');\n        let celda1 = document.createElement('td');\n        celda1.style.color = 'black';\n        let celda2 = document.createElement('td');\n        celda2.style.color = 'black';\n        let contenidoCelda1 = document.createTextNode(humanNames[property]);\n        let contenidoCelda2;\n        contenidoCelda2 = document.createTextNode(clonedProperties[property]);\n        celda1.appendChild(contenidoCelda1);\n        celda2.appendChild(contenidoCelda2);\n        fila.appendChild(celda1);\n        fila.appendChild(celda2);\n        tblBody.appendChild(fila);\n    })\n\n    table.appendChild(tblBody);\n    body.appendChild(table);\n    \n}\n\nconst removeTable = () => {\n    const element = document.getElementById('table');\n    if (typeof (element) != 'undefined' && element != null) {\n        let parentEl = element.parentElement;\n        parentEl.removeChild(element);\n    }\n}\n\nconst getDateFormat = (date) => {\n    let pad = '00';\n    let d = date.getDate().toString();\n    d = pad.substr(0, pad.length - d.length) + d;\n    let m = date.getMonth() + 1;\n    m = m.toString();\n    m = pad.substr(0, pad.length - m.length) + m;\n    const day = [d, m, date.getFullYear()].join('/');\n    return day;\n}\n\nconst getHourFormat = (date) => {\n    let h = date.getHours().toString();\n    let m = date.getMinutes().toString();\n    let s = date.getSeconds().toString();\n    let pad = '00';\n    h = pad.substr(0, pad.length - h.length) + h;\n    m = pad.substr(0, pad.length - m.length) + m;\n    s = pad.substr(0, pad.length - s.length) + s;\n    let hour = [h, m, s].join(':');\n    return hour;\n}\n\ninitmap();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz81NmQ3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBc0M7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkJBQTZCLEVBQUUseUJBQXlCLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtBQUNsRSxtRkFBbUYsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQzdGO0FBQ0EseUNBQXlDLGtEQUFrRDtBQUMzRixxREFBcUQsa0RBQWtEOztBQUV2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsd0JBQXdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGtEQUFZLE9BQU8sR0FBRyxrREFBWSxXQUFXO0FBQzlFLHVCQUF1QixtQkFBbUI7QUFDMUM7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRCxTO0FBQ0EsbUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSw4QkFBOEIsc0NBQW9CLENBQUMsRUFBRSxTQUFtQixDQUFDLEVBQUUsZUFBNEIsQ0FBQztBQUN4RztBQUNBLDhCQUE4QixpQkFBaUIsYUFBYSxVQUFVLFlBQVksU0FBUztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLHNDQUFvQixDQUFDLEVBQUUsU0FBbUIsQ0FBQyxFQUFFLE9BQW9CLENBQUM7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4QkFBOEI7QUFDM0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLDZCQUE2QixzQ0FBb0IsQ0FBQyxFQUFFLFNBQW1CLENBQUMsRUFBRSxpQkFBeUIsQ0FBQztBQUNwRztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsc0NBQW9CLENBQUMsRUFBRSxTQUFtQixDQUFDLEVBQUUsU0FBc0IsQ0FBQzs7QUFFOUY7QUFDQSw2Q0FBNkMsTUFBTTs7QUFFbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrREFBWSxPQUFPO0FBQzVDLDJCQUEyQixrREFBWSxPQUFPO0FBQzlDLDJCQUEyQixrREFBWSxPQUFPO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0RBQVksT0FBTztBQUM1QywyQkFBMkIsa0RBQVksT0FBTztBQUM5QywyQkFBMkIsa0RBQVksT0FBTztBQUM5QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVEO0FBQ0Esa0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIuL3NyYy9tYWluLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpeUNvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cydcbmxldCBtYXA7XG5sZXQgbGF5ZXJDb250cm9sO1xubGV0IG9ic2VydmF0aW9ucztcblxuY29uc3QgaW5pdG1hcCA9ICgpID0+IHtcbiAgICBjb25zdCBvc21VcmwgPSAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnO1xuICAgIGNvbnN0IGdlb21hdGljb1VybCA9ICdodHRwczovL3RpbGVzZXJ2ZXIuZ2VvbWF0aWNvLmVzL3N0eWxlcy9rbG9rYW50ZWNoLWJhc2ljL3t6fS97eH0ve3l9LnBuZyc7XG4gICAgY29uc3Qgb3NtQXR0cmliID0gJ01hcCBkYXRhIMKpIDxhIGhyZWY9XCJodHRwczovL29wZW5zdHJlZXRtYXAub3JnXCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJztcbiAgICBjb25zdCBvc20gPSBuZXcgTC5UaWxlTGF5ZXIob3NtVXJsLCB7IG1pblpvb206IDAsIG1heFpvb206IDE5LCBhdHRyaWJ1dGlvbjogb3NtQXR0cmliIH0pO1xuICAgIGNvbnN0IGdlb21hdGljbyA9IG5ldyBMLlRpbGVMYXllcihnZW9tYXRpY29VcmwsIHsgbWluWm9vbTogMCwgbWF4Wm9vbTogMTksIGF0dHJpYnV0aW9uOiBvc21BdHRyaWIgfSk7XG5cbiAgICBtYXAgPSBMLm1hcCgnbWFwJywge1xuICAgICAgICBjZW50ZXI6IFs0MC40MTI2MTIsIC0zLjY4NjExMV0sXG4gICAgICAgIHpvb206IDEzLFxuICAgICAgICBsYXllcnM6IFtnZW9tYXRpY29dLFxuICAgICAgICB6b29tQ29udHJvbDogZmFsc2VcbiAgICB9KTtcbiAgICBMLmNvbnRyb2wuem9vbSh7XG4gICAgICAgIHBvc2l0aW9uOiAndG9wcmlnaHQnXG4gICAgfSkuYWRkVG8obWFwKTtcblxuICAgIGNvbnN0IGJhc2VNYXBzID0ge1xuICAgICAgICBcIkJhc2ljXCI6IGdlb21hdGljbyxcbiAgICAgICAgXCJPU01cIjogb3NtXG4gICAgfVxuXG4gICAgbGF5ZXJDb250cm9sID0gTC5jb250cm9sLmxheWVycyhiYXNlTWFwcykuYWRkVG8obWFwKTtcbiAgICBkb3dubG9hZEdyaWQoKTtcbiAgICBkb3dubG9hZERhdGEoKTtcbiAgICBjcmVhdGVMZWdlbmQoKTtcbn07XG5cbmNvbnN0IGNyZWF0ZUxlZ2VuZCA9ICgpID0+IHtcbiAgICBsZXQgbGVnZW5kID0gTC5jb250cm9sKHtwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0J30pO1xuICAgIGxlZ2VuZC5vbkFkZCA9IChtYXApID0+IHtcbiAgICAgICAgY29uc3QgZGl2ID0gTC5Eb21VdGlsLmNyZWF0ZSgnZGl2JywgJ2xlZycpXG4gICAgICAgIGNvbnN0IGdyYWRlcyA9IFswLCA1LCAxMCwgMTUsIDIwLCAyNV1cbiAgICAgICAgY29uc3QgbGFiZWxzID0gW107XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBgUE0yLjUgJHtEaXlDb25zdGFudHMuVU5JVFN9ICR7RGl5Q29uc3RhbnRzLkJSRUFLTElORX0gYFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyYWRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCArPVxuICAgICAgICAgICAgICAgICc8aSBzdHlsZT1cImJhY2tncm91bmQ6JyArIGdldENvbG9yKGdyYWRlc1tpXSArIDEpICsgJ1wiPjwvaT4gJyArXG4gICAgICAgICAgICAgICAgZ3JhZGVzW2ldICsgKGdyYWRlc1tpICsgMV0gPyAnJm5kYXNoOycgKyAoZ3JhZGVzW2kgKyAxXS0gMSkgKyAnPGJyPicgOiAnKycpO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4gZGl2OyBcbiAgICB9O1xuICAgIGxlZ2VuZC5hZGRUbyhtYXApO1xufVxuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbWFwLnJlbW92ZUxheWVyKG9ic2VydmF0aW9ucyk7XG4gICAgbGV0IGluaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQnKS52YWx1ZTtcbiAgICBsZXQgaW5pdF9kYXRlID0gbmV3IERhdGUoaW5pdCk7XG4gICAgaW5pdF9kYXRlID0gaW5pdF9kYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgbGV0IGVuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmQnKS52YWx1ZTtcbiAgICBsZXQgZW5kX2RhdGUgPSBuZXcgRGF0ZShlbmQpO1xuICAgIC8qQWRkZWQgb25lIGRheSB0byBpbmNsdWRlIHRoZSBlbmQgZGF0ZSovXG4gICAgZW5kX2RhdGUuc2V0RGF0ZShlbmRfZGF0ZS5nZXREYXRlKCkgKyAxKTtcbiAgICBlbmRfZGF0ZSA9IGVuZF9kYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgZG93bmxvYWREYXRhKGluaXRfZGF0ZSwgZW5kX2RhdGUpO1xufSk7XG5cbmNvbnN0IGRvd25sb2FkRGF0YSA9IChpbml0X2RhdGUsIGVuZF9kYXRlKSA9PiB7XG4gICAgbGV0IG9ic2VydmF0aW9uc191cmwgPSBgJHtwcm9jZXNzLmVudi5CQVNFX1VSTH0ke3Byb2Nlc3MuZW52LkFQSV9VUkx9JHtwcm9jZXNzLmVudi5PQlNFUlZBVElPTlNfVVJMfWA7XG4gICAgaWYgKGluaXRfZGF0ZSAhPT0gdW5kZWZpbmVkICYmIGVuZF9kYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb2JzZXJ2YXRpb25zX3VybCA9IGAke29ic2VydmF0aW9uc191cmx9P2luaXRfZGF0ZT0ke2luaXRfZGF0ZX0mZW5kX2RhdGU9JHtlbmRfZGF0ZX1gXG4gICAgfVxuICAgIGZldGNoKG9ic2VydmF0aW9uc191cmwpXG4gICAgICAgIC50aGVuKHJlcyA9PiBoYW5kbGVFcnJvcnMocmVzKSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKHJlcyA9PiBkcmF3T3V0cHV0KHJlcykpXG4gICAgICAgIC50aGVuKCgpID0+IHJlbW92ZVRhYmxlKCkpXG4gICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coJ2Vycm9yJywgZXJyKSk7XG59O1xuXG5jb25zdCBkb3dubG9hZEdyaWQgPSAoKSA9PiB7XG4gICAgY29uc3QgZ3JpZF91cmwgPSBgJHtwcm9jZXNzLmVudi5CQVNFX1VSTH0ke3Byb2Nlc3MuZW52LkFQSV9VUkx9JHtwcm9jZXNzLmVudi5HUklEX1VSTH1gO1xuICAgIGZldGNoKGdyaWRfdXJsKVxuICAgICAgICAudGhlbihyZXMgPT4gaGFuZGxlRXJyb3JzKHJlcykpXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbihyZXMgPT4gZHJhd0dyaWQocmVzKSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbn1cblxuY29uc3QgZHJhd091dHB1dCA9IChsaW5lcykgPT4ge1xuICAgIG9ic2VydmF0aW9ucyA9IEwuZ2VvSnNvbihsaW5lcywge1xuICAgICAgICBwb2ludFRvTGF5ZXI6IGZ1bmN0aW9uIChmZWF0dXJlLCBsYXRsbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBMLmNpcmNsZU1hcmtlcihsYXRsbmcsIHN0eWxlKGZlYXR1cmUpKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBvYnNlcnZhdGlvbnMuYWRkVG8obWFwKS5vbignY2xpY2snLCBvYnNlcnZhdGlvbnNUYWJsZSk7XG4gICAgbGF5ZXJDb250cm9sLnJlbW92ZUxheWVyKG9ic2VydmF0aW9ucyk7XG4gICAgbGF5ZXJDb250cm9sLmFkZE92ZXJsYXkob2JzZXJ2YXRpb25zLCAnT2JzZXJ2YWNpb25lcycpO1xuICAgIGxldCBlbmRfb2JzZXJ2YXRpb24gPSBsaW5lcy5mZWF0dXJlcy5sZW5ndGggLSAxO1xuICAgIG1hcC5mbHlUbyhbbGluZXMuZmVhdHVyZXNbZW5kX29ic2VydmF0aW9uXS5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSwgbGluZXMuZmVhdHVyZXNbZW5kX29ic2VydmF0aW9uXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXV0sIFxuICAgICAgICAxNiwge2FuaW1hdGU6IGZhbHNlLCBkdXJhdGlvbjogMC4xfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG52YXIgc3R5bGVHcmlkID0gKGZlYXR1cmUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb2xvcjogJ2JsYWNrJyxcbiAgICAgICAgd2VpZ2h0OiAyLFxuICAgICAgICBmaWxsT3BhY2l0eTogMC42NSxcbiAgICAgICAgZmlsbENvbG9yOiBnZXRDb2xvcihmZWF0dXJlLnByb3BlcnRpZXMucG0yXzUpXG4gICAgfVxufTtcblxuY29uc3QgZHJhd0dyaWQgPSAobGluZXMpID0+IHtcbiAgICBjb25zdCBncmlkID0gTC5nZW9Kc29uKGxpbmVzLCB7XG4gICAgICAgIHN0eWxlOiBzdHlsZUdyaWRcbiAgICB9KS5hZGRUbyhtYXApLm9uKCdjbGljaycsIGdyaWRUYWJsZSk7XG4gICAgbGF5ZXJDb250cm9sLnJlbW92ZUxheWVyKGdyaWQpO1xuICAgIGxheWVyQ29udHJvbC5hZGRPdmVybGF5KGdyaWQsICdSZWppbGxhJyk7XG59XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsZm9ybScpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRubG9naW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCB1bmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1bmFtZScpLnZhbHVlO1xuICAgIGNvbnN0IHBzdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwc3cnKS52YWx1ZTtcbiAgICBkb3dubG9hZFRva2VuKHVuYW1lLCBwc3cpO1xufSk7XG5cbmNvbnN0IGRvd25sb2FkVG9rZW4gPSAodXNlciwgcGFzcykgPT4ge1xuICAgIGNvbnN0IGdldF90b2tlbl91cmwgPSBgJHtwcm9jZXNzLmVudi5CQVNFX1VSTH0ke3Byb2Nlc3MuZW52LkFQSV9VUkx9JHtwcm9jZXNzLmVudi5HRVRfVE9LRU5fVVJMfWA7XG4gICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybWRhdGEuYXBwZW5kKCd1c2VybmFtZScsIHVzZXIpO1xuICAgIGZvcm1kYXRhLmFwcGVuZCgncGFzc3dvcmQnLCBwYXNzKTtcblxuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZm9ybWRhdGEsXG4gICAgICAgIHJlZGlyZWN0OiAnZm9sbG93J1xuICAgIH07XG5cbiAgICBmZXRjaChnZXRfdG9rZW5fdXJsLCByZXF1ZXN0T3B0aW9ucylcbiAgICAgICAgLnRoZW4ocmVzID0+IGhhbmRsZUVycm9ycyhyZXMpKVxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4ocmVzID0+IGdldFRva2VuKHJlcykpO1xufVxuXG52YXIgdG9rZW47XG5jb25zdCBnZXRUb2tlbiA9IChyZXMpID0+IHtcbiAgICB0b2tlbiA9IHJlcy50b2tlbjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBsb2FkZmlsZScpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxmb3JtJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICByZW1vdmVUYWJsZSgpO1xufVxuXG5jb25zdCBoYW5kbGVFcnJvcnMgPSAocmVzcG9uc2UpID0+IHtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG59O1xuXG5jb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlaW5wdXQnKTtcbmNvbnN0IG9uU2VsZWN0RmlsZSA9ICgpID0+IHtcbiAgICB1cGxvYWQoaW5wdXQuZmlsZXNbMF0pXG59O1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bnVwbG9hZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TZWxlY3RGaWxlLCBmYWxzZSk7XG5cbmNvbnN0IHVwbG9hZCA9IChmaWxlKSA9PiB7XG4gICAgY29uc3QgdXBsb2FkX3VybCA9IGAke3Byb2Nlc3MuZW52LkJBU0VfVVJMfSR7cHJvY2Vzcy5lbnYuQVBJX1VSTH0ke3Byb2Nlc3MuZW52LlVQTE9BRF9VUkx9YDtcblxuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgYFRva2VuICR7dG9rZW59YCk7XG5cbiAgICBjb25zdCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm1kYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSwgZmlsZS5uYW1lKTtcblxuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgYm9keTogZm9ybWRhdGEsXG4gICAgICAgIHJlZGlyZWN0OiAnZm9sbG93J1xuICAgIH1cblxuICAgIGZldGNoKHVwbG9hZF91cmwsIHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgZG93bmxvYWRHcmlkKCk7XG4gICAgICAgICAgICBkb3dubG9hZERhdGEoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGFsZXJ0KCdDU1YgbWFsIGZvcm1hZG8nKSk7XG59XG5cbmNvbnN0IGdldENvbG9yID0gKHgpID0+IHtcbiAgICByZXR1cm4gIHggPiAyNSA/ICcjYmQwMDI2JyA6XG4gICAgICAgICAgICB4ID4gMTkgPyAnI2UzMWExYycgOlxuICAgICAgICAgICAgeCA+IDE0ID8gJyNmYzRlMmEnIDpcbiAgICAgICAgICAgIHggPiAgOSA/ICcjZmVkOTc2JyA6XG4gICAgICAgICAgICB4ID4gIDUgPyAnIzQxYWU3NicgOlxuICAgICAgICAgICAgICAgICAgICAgJyMwMDZkMmMnO1xufTtcblxuY29uc3Qgc3R5bGUgPSAoZmVhdHVyZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJhZGl1czogNyxcbiAgICAgICAgY29sb3I6ICdibGFjaycsXG4gICAgICAgIGZpbGxDb2xvcjogZ2V0Q29sb3IoZmVhdHVyZS5wcm9wZXJ0aWVzLnBtMl81KSxcbiAgICAgICAgd2VpZ2h0OiAyLFxuICAgICAgICBvcGFjaXR5OiAwLjgsXG4gICAgICAgIGZpbGxPcGFjaXR5OiAwLjhcbiAgICB9O1xufTtcblxuY29uc3Qgb2JzZXJ2YXRpb25zVGFibGUgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZXZlbnQubGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzWydkYXRlJ10pO1xuICAgIGNvbnN0IGRheSA9IGdldERhdGVGb3JtYXQoZGF0ZSk7XG4gICAgY29uc3QgY2xvbmVkUHJvcGVydGllcyA9IHsgLi4uZXZlbnQubGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzIH07XG4gICAgY2xvbmVkUHJvcGVydGllc1snZGF0ZSddID0gZGF5O1xuICAgIFxuICAgIGNvbnN0IHByb3BlcnR5TmFtZXMgPSBbJ2RhdGUnLCAndGltZScsICdwbTFfMCcsICdwbTJfNScsICdwbTEwXzAnXTtcbiAgICBjb25zdCBodW1hbk5hbWVzID0ge1xuICAgICAgICAnZGF0ZSc6ICdGZWNoYScsXG4gICAgICAgICd0aW1lJzogJ0hvcmEnLFxuICAgICAgICAncG0xXzAnOiBgUE0gMSAke0RpeUNvbnN0YW50cy5VTklUU31gLCAgXG4gICAgICAgICdwbTJfNSc6IGBQTSAyLjUgJHtEaXlDb25zdGFudHMuVU5JVFN9YCxcbiAgICAgICAgJ3BtMTBfMCc6IGBQTSAxMCAke0RpeUNvbnN0YW50cy5VTklUU31gXG4gICAgfVxuICAgIGNyZWF0ZVRhYmxlKGNsb25lZFByb3BlcnRpZXMsIHByb3BlcnR5TmFtZXMsIGh1bWFuTmFtZXMpO1xufVxuXG5jb25zdCBncmlkVGFibGUgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBjbG9uZWRHcmlkUHJvcGVydGllcyA9IHsgLi4uZXZlbnQubGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzIH07XG4gICAgY29uc3QgcHJvcGVydHlHcmlkTmFtZXMgPSBbJ3VzZXJuYW1lJywgJ3BtMV8wJywgJ3BtMl81JywgJ3BtMTBfMCddO1xuICAgIGNvbnN0IGh1bWFuR3JpZE5hbWVzID0ge1xuICAgICAgICAndXNlcm5hbWUnOiAnVXN1YXJpbyArIGFjdGl2bycsXG4gICAgICAgICdwbTFfMCc6IGBQTSAxICR7RGl5Q29uc3RhbnRzLlVOSVRTfWAsXG4gICAgICAgICdwbTJfNSc6IGBQTSAyLjUgJHtEaXlDb25zdGFudHMuVU5JVFN9YCxcbiAgICAgICAgJ3BtMTBfMCc6IGBQTSAxMCAke0RpeUNvbnN0YW50cy5VTklUU31gICAgICAgICBcbiAgICB9XG4gICAgY3JlYXRlVGFibGUoY2xvbmVkR3JpZFByb3BlcnRpZXMsIHByb3BlcnR5R3JpZE5hbWVzLCBodW1hbkdyaWROYW1lcyk7XG59XG5cbmNvbnN0IGNyZWF0ZVRhYmxlID0gKGNsb25lZFByb3BlcnRpZXMsIHByb3BlcnR5TmFtZXMsIGh1bWFuTmFtZXMpID0+IHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlblNpZGViYXJNZW51JykuY2hlY2tlZCA9IHRydWU7XG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlcGlja2VyJyk7ICAgIFxuICAgIHJlbW92ZVRhYmxlKCk7ICAgIFxuXG4gICAgbGV0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RhYmxlJyk7XG4gICAgdGFibGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdvYnNlcnZhdGlvbl90YWJsZScpO1xuICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnYm9yZGVyJywgJzEnKTtcbiAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2JvcmRlci1jb2xvcicsICdibGFjaycpO1xuICAgIGxldCB0YmxCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcblxuICAgIHByb3BlcnR5TmFtZXMubWFwKHByb3BlcnR5ID0+IHtcbiAgICAgICAgbGV0IGZpbGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBsZXQgY2VsZGExID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgY2VsZGExLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcbiAgICAgICAgbGV0IGNlbGRhMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgIGNlbGRhMi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgIGxldCBjb250ZW5pZG9DZWxkYTEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShodW1hbk5hbWVzW3Byb3BlcnR5XSk7XG4gICAgICAgIGxldCBjb250ZW5pZG9DZWxkYTI7XG4gICAgICAgIGNvbnRlbmlkb0NlbGRhMiA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNsb25lZFByb3BlcnRpZXNbcHJvcGVydHldKTtcbiAgICAgICAgY2VsZGExLmFwcGVuZENoaWxkKGNvbnRlbmlkb0NlbGRhMSk7XG4gICAgICAgIGNlbGRhMi5hcHBlbmRDaGlsZChjb250ZW5pZG9DZWxkYTIpO1xuICAgICAgICBmaWxhLmFwcGVuZENoaWxkKGNlbGRhMSk7XG4gICAgICAgIGZpbGEuYXBwZW5kQ2hpbGQoY2VsZGEyKTtcbiAgICAgICAgdGJsQm9keS5hcHBlbmRDaGlsZChmaWxhKTtcbiAgICB9KVxuXG4gICAgdGFibGUuYXBwZW5kQ2hpbGQodGJsQm9keSk7XG4gICAgYm9keS5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgXG59XG5cbmNvbnN0IHJlbW92ZVRhYmxlID0gKCkgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFibGUnKTtcbiAgICBpZiAodHlwZW9mIChlbGVtZW50KSAhPSAndW5kZWZpbmVkJyAmJiBlbGVtZW50ICE9IG51bGwpIHtcbiAgICAgICAgbGV0IHBhcmVudEVsID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBwYXJlbnRFbC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICB9XG59XG5cbmNvbnN0IGdldERhdGVGb3JtYXQgPSAoZGF0ZSkgPT4ge1xuICAgIGxldCBwYWQgPSAnMDAnO1xuICAgIGxldCBkID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcbiAgICBkID0gcGFkLnN1YnN0cigwLCBwYWQubGVuZ3RoIC0gZC5sZW5ndGgpICsgZDtcbiAgICBsZXQgbSA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgbSA9IG0udG9TdHJpbmcoKTtcbiAgICBtID0gcGFkLnN1YnN0cigwLCBwYWQubGVuZ3RoIC0gbS5sZW5ndGgpICsgbTtcbiAgICBjb25zdCBkYXkgPSBbZCwgbSwgZGF0ZS5nZXRGdWxsWWVhcigpXS5qb2luKCcvJyk7XG4gICAgcmV0dXJuIGRheTtcbn1cblxuY29uc3QgZ2V0SG91ckZvcm1hdCA9IChkYXRlKSA9PiB7XG4gICAgbGV0IGggPSBkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKTtcbiAgICBsZXQgbSA9IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCk7XG4gICAgbGV0IHMgPSBkYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpO1xuICAgIGxldCBwYWQgPSAnMDAnO1xuICAgIGggPSBwYWQuc3Vic3RyKDAsIHBhZC5sZW5ndGggLSBoLmxlbmd0aCkgKyBoO1xuICAgIG0gPSBwYWQuc3Vic3RyKDAsIHBhZC5sZW5ndGggLSBtLmxlbmd0aCkgKyBtO1xuICAgIHMgPSBwYWQuc3Vic3RyKDAsIHBhZC5sZW5ndGggLSBzLmxlbmd0aCkgKyBzO1xuICAgIGxldCBob3VyID0gW2gsIG0sIHNdLmpvaW4oJzonKTtcbiAgICByZXR1cm4gaG91cjtcbn1cblxuaW5pdG1hcCgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/main.js\n");

/***/ })

/******/ });